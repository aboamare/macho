import{o as e,c as o,w as s,F as t,f as n,a,l as r,d as l,p as c,b as i,r as d,e as m,v as p,g as u,h,t as g,i as f,j as v,k as w}from"./vendor.81cd6342.js";!function(e=".",o="__import__"){try{self[o]=new Function("u","return import(u)")}catch(s){const t=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[o]=e=>new Promise(((s,a)=>{const r=new URL(e,t);if(self[o].moduleMap[r])return s(self[o].moduleMap[r]);const l=new Blob([`import * as m from '${r}';`,`${o}.moduleMap['${r}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){a(new Error(`Failed to import: ${e}`)),n(c)},onload(){s(self[o].moduleMap[r]),n(c)}});document.head.appendChild(c)})),self[o].moduleMap={}}}("/assets/");const b={name:"AlarmSignal",props:{name:String,state:String},computed:{css(){return{[this.name]:!0,on:"on"===this.state}}},methods:{toggle(){const e=new URL(window.location.href);e.pathname=`/${this.name}`,"http://localhost:3000"===e.origin&&(e.port="8080"),fetch(e,{method:"on"===this.state?"DELETE":"PUT"})}}},y=s("data-v-167ffe52")(((s,t,n,a,r,l)=>(e(),o("div",{class:["signal",l.css],onClick:t[1]||(t[1]=(...e)=>l.toggle&&l.toggle(...e))},null,2))));b.render=y,b.__scopeId="data-v-167ffe52";t.appIcons={faDoorOpen:n,faDoorClosed:a},r.add(Object.values(t.appIcons)),l.watch();const $={name:"Door",components:{"v-icon":t},props:{name:String,state:String,severity:String},computed:{css(){return console.log(`${this.name} is now ${this.severity}`),{[this.severity||"normal"]:!0}},iconObj(){return console.log(`${this.name} should show door-${this.state}`),["fas","open"===this.state?"door-open":"door-closed"]}}},j=s("data-v-5b5828ee");c("data-v-5b5828ee");const R=u("br",null,null,-1);i();const L=j(((s,t,n,a,r,l)=>{const c=d("v-icon");return e(),o("div",{class:["door",l.css]},[m(u("span",null,[u(c,{class:"icon",icon:"door-closed"})],512),[[p,"closed"===n.state]]),m(u("span",null,[u(c,{class:"icon",icon:"door-open"})],512),[[p,"open"===n.state]]),R,h(" "+g(n.name)+": "+g(n.state),1)],2)}));$.render=L,$.__scopeId="data-v-5b5828ee";const O={name:"App",components:{"alarm-signal":b,door:$},data:()=>({alarms:{general:"off",co2:"on"},doors:{ER:"closed",ECR:"closed"}}),created(){new WebSocket("ws://localhost:8080/subscribe").onmessage=e=>{try{const o=JSON.parse(e.data);for(const e in o){const s=o[e];"on"===s||"off"===s?this.alarms[e]=s:"open"!==s&&"closed"!==s||(console.log(`${e} is now ${s}`),this.doors[e]=s)}}catch(o){console.warn(o)}}},methods:{severity(e){return console.log(`recomputing severity for ${e}..`),"open"===this.doors[e]?Object.values(this.doors).filter((e=>"open"===e)).length>1?"danger":"warning":"normal"}}},S={class:"layout"},U={class:"signal-column"};O.render=function(s,t,n,a,r,l){const c=d("alarm-signal"),i=d("door");return e(),o("div",S,[u("div",U,[(e(!0),o(f,null,v(r.alarms,((s,t)=>(e(),o(c,{key:t,name:t,state:s},null,8,["name","state"])))),128))]),(e(!0),o(f,null,v(r.doors,((s,t)=>(e(),o(i,{class:"door",key:t,name:t,state:s,severity:l.severity(t)},null,8,["name","state","severity"])))),128))])},w(O).mount("#app");
